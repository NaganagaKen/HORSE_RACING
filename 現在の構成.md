# 現在の構成

##　現在の処理
- 最低限の前処理　（common_process）
  - レース前に知ることが出来ない情報を削除
    - 着差タイム
    - 走破タイム
    - 通過順1-4角
    - 上がり3Fタイム
    - 上がり3F順位
    - Ave-3F
    - PCI
    - -3F差
    - win_odds (これは馬券売買終了後に確定するため、データリークとなり得る)
    - prize
  - ターゲット変数の作成
    - 1着を1, それ以外を0としたtarget列を作成
    - rank列を削除
  - バリテーションの工夫
    - shuffle=Trueにすると、未来のレース結果を元に確率を計算できるようになってしまう。
    - 時系列データのバリテーションをする必要がある。


## 備忘録
- 確率の予測はloglossで評価（確率の確実性を表す指標、小さいほど良い）
- キャリブレーションをすることで決定木の出す確率を滑らかにする。
- レース内の確率で正規化する。（これにより、レースごとの頭数の問題を補正可能）
- これをloglossで評価
- 競馬は時系列データであることに注意。（特にfoldの分割方法）
